<!DOCTYPE html>

<html lang="en">
  <!--begin::Head-->
  <head>
    <title>Quản lý admin</title>

    <script src="/js/popper.min.js" crossorigin="anonymous"></script>
    <link
      href="/plugins/custom/datatables/datatables.bundle.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="/js/jquery-3.5.1.js" crossorigin="anonymous"></script>
    <% include partials/head %>
  </head>
  <!--end::Head-->
  <!--begin::Body-->
  <body
    id="kt_body"
    style="background-image: url(/media/bg/bg-10.jpg)"
    class="
      quick-panel-right
      demo-panel-right
      offcanvas-right
      header-fixed
      subheader-enabled
      page-loading
    "
  >
    <!--begin::Main-->

    <div class="d-flex flex-column flex-root">
      <!--begin::Page-->
      <div class="d-flex flex-row flex-column-fluid page">
        <!--begin::Wrapper-->
        <div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
          <% include partials/menu_admin %>
          <!--begin::Content-->
          <div
            class="content d-flex flex-column flex-column-fluid"
            id="kt_content"
          >
            <!--begin::Subheader-->
            <div
              class="subheader py-2 py-lg-12 subheader-transparent"
              id="kt_subheader"
            >
              <div
                class="
                  container
                  d-flex
                  align-items-center
                  justify-content-between
                  flex-wrap flex-sm-nowrap
                "
              >
                <!--begin::Info-->
                <div class="d-flex align-items-center flex-wrap mr-1">
                  <!--begin::Heading-->
                  <div class="d-flex flex-column">
                    <!--begin::Title-->
                    <h2 class="text-white font-weight-bold my-2 mr-5">
                      Quản lý
                    </h2>
                    <!--end::Title-->
                    <!--begin::Breadcrumb-->
                    <div
                      class="d-flex align-items-center font-weight-bold my-2"
                    >
                      <!--begin::Item-->
                      <a href="#" class="opacity-75 hover-opacity-100">
                        <i class="flaticon2-shelter text-white icon-1x"></i>
                      </a>
                      <!--end::Item-->
                      <!--begin::Item-->
                      <span
                        class="
                          label label-dot label-sm
                          bg-white
                          opacity-75
                          mx-3
                        "
                      ></span>
                      <a
                        href=""
                        class="
                          text-white text-hover-white
                          opacity-75
                          hover-opacity-100
                        "
                        >Quản lý</a
                      >
                      <!--end::Item-->
                      <!--begin::Item-->
                      <span
                        class="
                          label label-dot label-sm
                          bg-white
                          opacity-75
                          mx-3
                        "
                      ></span>
                      <a
                        href=""
                        class="
                          text-white text-hover-white
                          opacity-75
                          hover-opacity-100
                        "
                        >Quản lý quyền quản trị</a
                      >
                      <!--end::Item-->
                    </div>
                    <!--end::Breadcrumb-->
                  </div>
                  <!--end::Heading-->
                </div>

                <!--end::Info-->
              </div>
            </div>
            <!--end::Subheader-->
            <!--begin::Entry-->
            <div class="d-flex flex-column-fluid">
              <!--begin::Container-->
              <div class="container">
                <!--begin::Dashboard-->
                <div class="card card-custom">
                  <!--begin::Row-->
                  <div class="row">
                    <div class="card-body">
                      <!--begin::Form-->

                      <div class="card-body">
                        <form
                          name="add-admin"
                          method="POST"
                          action="/admin/add-admin"
                        >
                          <div class="form-group row">
                            <div class="col-lg-2"></div>
                            <div class="col-lg-7">
                              <input
                                type="textarea"
                                name="username"
                                class="form-control form-control-lg"
                                placeholder="Nhập tên người dùng"
                              />
                            </div>
                            <button
                              type="submit"
                              class="btn btn-light-primary mr-2"
                            >
                              Thêm làm admin
                            </button>
                          </div>
                        </form>
                        <form
                          name="remove-admin"
                          method="POST"
                          action="/admin/remove-admin"
                        >
                          <div class="form-group row">
                            <div class="col-lg-2"></div>
                            <div class="col-lg-7">
                              <input
                                type="textarea"
                                name="username"
                                class="form-control form-control-lg"
                                placeholder="Nhập tên quản trị viên hoặc giảng viên"
                              />
                            </div>
                            <button
                              type="submit"
                              class="btn btn-light-primary mr-2"
                            >
                              Xóa mọi quyền
                            </button>
                          </div>
                        </form>
                        <form
                          name="add-admin"
                          method="POST"
                          action="/admin/add-teacher"
                        >
                          <div class="form-group row">
                            <div class="col-lg-2"></div>
                            <div class="col-lg-7">
                              <input
                                type="textarea"
                                name="username"
                                class="form-control form-control-lg"
                                placeholder="Nhập tên người dùng cần thêm quyền giảng viên"
                              />
                            </div>
                            <button
                              type="submit"
                              class="btn btn-light-primary mr-2"
                            >
                              Thêm quyền giảng viên
                            </button>
                          </div>
                        </form>
                      </div>

                      <!--end::Form-->
                      <br />
                      <hr />
                      <h3 style="text-align: center">
                        Quản lý quyền của giáo viên
                      </h3>
                      <form
                        class="teacherCheck"
                        method="POST"
                        action="/admin/teacherCheck"
                      >
                        <div class="card-body" style="display: flex">
                          <!-- <div class="col" style="text-align:center; width: 50%;" >
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="customSwitch1" checked>
                                                    <label class="custom-control-label" for="customSwitch1">Tạo bài tập</label>
                                                  </div>
                                            </div> -->
                          <label for="" class="col-lg-2"
                            >Quyền thêm bài tập<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="col-lg-4">
                            <select
                              class="form-control"
                              name="createProblem"
                              id="createProblem"
                            >
                              <option value="0">Không</option>
                              <option value="1">Có</option>
                            </select>
                          </div>

                          <label for="" class="col-lg-2"
                            >Quyền thêm cuộc thi<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="col-lg-4">
                            <select
                              class="form-control"
                              name="createContest"
                              id="createContest"
                            >
                              <option value="0">Không</option>
                              <option value="1">Có</option>
                            </select>
                          </div>
                        </div>
                        <button
                          type="submit"
                          class="btn btn-light-primary mr-2"
                          style="float: right"
                        >
                          Lưu
                        </button>
                      </form>

                      <br />
                      <br />
                      <hr />
                      <h3 style="text-align: center">Quản lý tài khoản.</h3>
                      <br />

                      <!--begin: Datatable-->
                      <table
                        id="table_id"
                        class="
                          table table-separate table-head-custom table-checkable
                        "
                        data-page-length="50"
                      >
                        <thead style="text-align: center">
                          <tr>
                            <th scope="col">STT</th>
                            <th scope="col">Tài khoản</th>
                            <th scope="col">Tên</th>
                            <th scope="col">Email</th>
                            <th scope="col">Admin</th>
                            <th scope="col">Teacher</th>
                          </tr>
                        </thead>
                        <tbody style="text-align: center">
                          <% for(var i = 0; i < data.length; i++) { %>
                          <tr>
                            <td><%= i + 1 %></td>
                            <td><%= data[i].username %></td>
                            <td><%= data[i].name %></td>
                            <td><%= data[i].email %></td>
                            <!--Check admin-->
                            <% if(data[i].isAdmin==true &&
                            data[i].isTeacher==false){ %>
                            <td><i class="far fa-check-circle icon-xl"></i></td>
                            <% }else{ %>
                            <td><i class="far fa-circle icon-xl"></i></td>
                            <% } %>
                            <!--Check Teacher-->
                            <% if(data[i].isTeacher==true){ %>
                            <td><i class="far fa-check-circle icon-xl"></i></td>
                            <% }else{ %>
                            <td><i class="far fa-circle icon-xl"></i></td>
                            <% } %>
                          </tr>
                          <% } %>
                        </tbody>
                      </table>
                      <!--end: Datatable-->

                      <hr />
                      <h3 style="text-align: center">
                        Reset tài khoản sinh viên.
                      </h3>
                      <br />
                      <form
                        class="teacherCheck"
                        method="POST"
                        action="/user/passwordReset"
                      >
                        <div class="card-body" style="display: flex">
                          <!-- <div class="col" style="text-align:center; width: 50%;" >
                                                    <div class="custom-control custom-switch">
                                                        <input type="checkbox" class="custom-control-input" id="customSwitch1" checked>
                                                        <label class="custom-control-label" for="customSwitch1">Tạo bài tập</label>
                                                      </div>
                                                </div> -->
                          <label for="" class="col-lg-2"
                            >Lấy lại tài khoản cho học sinh<span
                              class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="col-lg-4">
                            <input
                              type="textarea"
                              name="ResetUser"
                              class="form-control form-control-lg"
                              placeholder="Nhập username sinh viên"
                            />
                          </div>
                        </div>
                        <button
                          type="submit"
                          class="btn btn-light-primary mr-2"
                          style="float: right"
                        >
                          Lưu
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--end::Container-->
            </div>
            <!--end::Entry-->
          </div>
          <!--end::Content-->

          <% include partials/footer %>
        </div>
        <!--end::Wrapper-->
      </div>
      <!--end::Page-->
    </div>
    <!--end::Main-->
    <script>
      var URL = window.location.href;
      if (URL.search("msg=") != -1) {
        var message = URL.split("msg=")[1];
        message = message.replace(/-/g, " ");
        window.alert(message);
        window.open("/admin/manage-admins", "_self");
      }
      $(document).ready(function () {
        var table = $("#table_id").DataTable({
          columnDefs: [
            {
              searchable: false,
              orderable: false,
              targets: 0,
            },
          ],
          order: [[1, "asc"]],
        });

        table
          .on("order.dt search.dt", function () {
            table
              .column(0, { search: "applied", order: "applied" })
              .nodes()
              .each(function (cell, i) {
                cell.innerHTML = i + 1;
              });
          })
          .draw();
      });

      // $("#customSwitch1").on('change', function() {
      //     if ($(this).is(':checked')) {
      //         $(this).attr('value', 'true');
      //         //alert($(this).val());
      //     }
      //     else {
      //        $(this).attr('value', 'false');
      //        //alert($(this).val());
      //     }
      //     // alert($(this).val());

      // });
      // $("#customSwitch2").on('change', function() {
      //     if ($(this).is(':checked')) {
      //         $(this).attr('value', 'true');
      //         alert($(this).val());
      //     }
      //     else {
      //        $(this).attr('value', 'false');
      //        alert($(this).val());
      //     }
      // });
    </script>
    <% include partials/script %>

    <script type="text/javascript" src="/js/datatables.min.js"></script>

    <script src="/plugins/custom/datatables/datatables.bundle.js"></script>
    <!--end::Page Vendors-->
    <!--begin::Page Scripts(used by this page)-->
    <script src="/js/pages/crud/datatables/basic/headers.js"></script>
    <!--end::Page Scripts-->
  </body>
  <!--end::Body-->
</html>
