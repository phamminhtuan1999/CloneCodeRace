
<!DOCTYPE html>

<html lang="en">
	<!--begin::Head-->
	<head>
        <title>Quản lý môn học</title>
        <link rel="stylesheet" type="text/css" href="/css/jquery.dataTables.min.css">
        <script src="/js/jquery-3.5.1.min.js"></script>
        <!-- <link rel="stylesheet" href="/css/bootstrap-3.4.0.min.css"> -->
        <script src="/js/jquery-3.3.1.min.js"></script>
        <link href="/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />
            <link href="/multiple-select.css" rel="stylesheet" type="text/css">
        <script src="/jquery.multiple.select.js"></script>
        <% include partials/head %>

    </head>

    <style>
        .demo { width:300px;}
    </style>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" style="background-image: url(/media/bg/bg-10.jpg)" class="quick-panel-right demo-panel-right offcanvas-right header-fixed subheader-enabled page-loading">
		<!--begin::Main-->

		<div class="d-flex flex-column flex-root">
			<!--begin::Page-->
			<div class="d-flex flex-row flex-column-fluid page">
				<!--begin::Wrapper-->
				<div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
		        <% include partials/menu_admin %>
                	<!--begin::Content-->
					<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Subheader-->
						<div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
							<div class="container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
								<!--begin::Info-->
								<div class="d-flex align-items-center flex-wrap mr-1">
									<!--begin::Heading-->
									<div class="d-flex flex-column">
										<!--begin::Title-->
										<h2 class="text-white font-weight-bold my-2 mr-5">Quản lý môn học</h2>
										<!--end::Title-->
										<!--begin::Breadcrumb-->
										<div class="d-flex align-items-center font-weight-bold my-2">
											<!--begin::Item-->
											<a href="#" class="opacity-75 hover-opacity-100">
												<i class="flaticon2-shelter text-white icon-1x"></i>
											</a>
											<!--end::Item-->
											<!--begin::Item-->
											<span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
											<a href="" class="text-white text-hover-white opacity-75 hover-opacity-100">Quản lý</a>
											<!--end::Item-->
											<!--begin::Item-->
											<span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
											<a href="" class="text-white text-hover-white opacity-75 hover-opacity-100">Quản lý môn học</a>
											<!--end::Item-->
										</div>
										<!--end::Breadcrumb-->
									</div>
									<!--end::Heading-->
                                </div>
                                
								<!--end::Info-->
                                
							</div>
						</div>
						<!--end::Subheader-->
						<!--begin::Entry-->
						<div class="d-flex flex-column-fluid">
							<!--begin::Container-->
							<div class="container">
                                <!--begin::Dashboard-->
                                <div class="card card-custom">
                                    <!--begin::Row-->
                                <div class="row">
                                    <div class="card-body">
                                        <br>
                                        <h3 style="text-align:center">Tạo Môn học</h3>
                                        <br>
                                         <!--begin::Form-->
                                         <form action="/admin/create_subjects" onsubmit="return validateForm()" method="post">                                           
                                            <div class="card-body">
                                                <div class="form-group form-group-last">
                                                    <div class="alert alert-custom alert-default" role="alert">
                                                    <div class="alert-icon"><i class="flaticon-warning text-primary"></i></div>
                                                    <div class="alert-text">
                                                        Lưu ý: Những mục có dấu <code>*</code> yêu cầu người dùng phải điền đủ thông tin.
                                                    </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-lg-3 col-form-label text-lg-right" >Môn học<span class="text-danger">*</span></label>
                                                    <div class="col-lg-7"> 
                                                        <input type="textarea" class="form-control form-control-lg" name="subjectName" id="subjectName" placeholder=""/>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-lg-3 col-form-label text-lg-right" >Nội dung môn học</label>
                                                    <div class="col-lg-7"> 
                                                        <input type="textarea" class="form-control form-control-lg" name="decriptionSubjects">
                                                    </div>
                                                    
                                                </div>
                                                

                                            </div>
                                            <div class="row">
                                                <div class="col-lg-3"></div>
                                                <div class="col-lg-9">
                                                    <button type="submit" class="btn btn-light-primary mr-2">Tạo Môn học</button>
                                                    <button type="reset" class="btn btn-primary">Nhập lại</button>
                                                </div>
                                            </div>
                                        </form>
                                        <!--end::Form-->
                                        <!--end::Form-->
                                        <br>
                                        <hr>
                                        <h3 style="text-align:center">Danh sách chủ đề</h3>
                                        <br>
										
                                        <table id="table_id" class="display" data-page-length="10">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center;">Stt</th>
                                                    <th style="text-align:center;">Môn học</th>
                                                    <th style="text-align:center;">Tác vụ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% for(var i = 0; i < data.length; i++) { %>
                                                <tr style="text-align:center;">
                                                    <td>

                                                    </td>
                                                    <td >
                                                        <%= data[i].subjectsName %>
                                                    </td>

                                                    <td >
                                                       
                                                        <form method="POST" action="/admin/deleteSubject/<%= data[i].id %>">
                                                            <a href="/admin/add_chapter/<%= data[i].id %>">
                                                                <button type="button" class="btn btn-success btn-sm">Thêm chương</button></a>
                                                            <a href="/admin/edit_subjects/<%= data[i].id %>">
                                                                <button type="button" class="btn btn-success btn-sm">Chỉnh sửa</button></a>
                                                            <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                                                        </form>
                                                    </td>
                                                </tr>
                                                <% } %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                </div>
								
							</div>
							<!--end::Container-->
						</div>
						<!--end::Entry-->
					</div>
					<!--end::Content-->

				<% include partials/footer %>
			</div>
			<!--end::Wrapper-->
		</div>
			<!--end::Page-->
	</div>
    <!--end::Main-->
  
    <!--begin::Scrolltop-->
    
    <% include partials/script %>

    
    <script type="text/javascript" src="/js/datatables.min.js"></script>

    <script src="/plugins/custom/datatables/datatables.bundle.js"></script>
    <!--end::Page Vendors-->
    <!--begin::Page Scripts(used by this page)-->
    <script src="/js/pages/crud/datatables/basic/headers.js"></script>

  <Script>
        $(document).ready(function() {
    var table = $('#table_id').DataTable( {
        "columnDefs": [ {
            "searchable": false,
            "orderable": false,
            "targets": 0
        } ],
        "order": [[ 1, 'asc' ]]
    } );
 
    table.on( 'order.dt search.dt', function () {
        table.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
            cell.innerHTML = i+1;
        } );
    } ).draw();
    var URL = window.location.href;
        var msg = URL.split("?")[1];
        if (msg !== "") {
            const probCode = msg.split("_")[0];
            const res = msg.split("_")[1];
            if(res != "Success"){
                window.alert("Thao tác thất bại, vui lòng kiểm tra lại");
            }
            else{
                window.alert("Thao tác thành công");
                window.open("/admin/create_subjects", "_self");

            }
            setTimeout(function () {
         window.location.href = "/admin/create_subjects";
        }, 0);

        }
} );
function validateForm() {
     var subjectName = document.getElementById("subjectName").value;
 
    if (subjectName == null || subjectName == "") {
        alert("bạn cần nhập tên môn học.");
        return false;
    } 
}

    </Script>
    </body>
    <!--end::Body-->
    </html>