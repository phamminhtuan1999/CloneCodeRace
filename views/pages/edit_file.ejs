
<!DOCTYPE html>

<html lang="en">
	<!--begin::Head-->
	<head>
    <title>DP2T</title>
		<script src="/js/jquery-3.5.1.js"crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/bulma.min.css">
    <link rel="stylesheet" href="/css/bootstrap-4.3.1.min.css" crossorigin="anonymous">
    <!--dropzone-->
    <link
    rel="stylesheet"
    href="/css/dropzone.min.css">
      <title>Add | CodeRace</title>
      <% include partials/head %>

	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" style="background-image: url(/media/bg/bg-10.jpg)" class="quick-panel-right demo-panel-right offcanvas-right header-fixed subheader-enabled page-loading">
		<!--begin::Main-->

		<div class="d-flex flex-column flex-root">
			<!--begin::Page-->
			<div class="d-flex flex-row flex-column-fluid page">
				<!--begin::Wrapper-->
				<div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
		        <% include partials/menu_admin %>
              <!--begin::Content-->
					<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Subheader-->
						<div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
							<div class="container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
								<!--begin::Info-->
								<div class="d-flex align-items-center flex-wrap mr-1">
									<!--begin::Heading-->
									<div class="d-flex flex-column">
										<!--begin::Title-->
										<h2 class="text-white font-weight-bold my-2 mr-5">Upload File</h2>
										<!--end::Title-->
										<!--begin::Breadcrumb-->
										<div class="d-flex align-items-center font-weight-bold my-2">
											<!--begin::Item-->
											<a href="#" class="opacity-75 hover-opacity-100">
												<i class="flaticon2-shelter text-white icon-1x"></i>
											</a>
											<!--end::Item-->
											<!--begin::Item-->
											<span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
											<a href="" class="text-white text-hover-white opacity-75 hover-opacity-100">Quản lý</a>
											<!--end::Item-->
											<!--begin::Item-->
											<span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
											<a href="" class="text-white text-hover-white opacity-75 hover-opacity-100">Upload File</a>
											<!--end::Item-->
										</div>
										<!--end::Breadcrumb-->
									</div>
									<!--end::Heading-->
								</div>
								<!--end::Info-->

							</div>
						</div>
            <!--end::Subheader-->
            <% data.forEach(function(edit_file){ %> 
            <div class="d-flex flex-column-fluid">
              <div class="container">
                <div class="col-lg-12">                  <!--begin::Card-->
                  <div class="card card-custom">
                      <div class="container">
                          <div class="jumbotron jumbotron-fluid" style="background-color:white;">
                            <div class="container">
                              
                              <hr class="my-2">
                              <b>File:<%= edit_file.files[0] %></b>
                              <div class="uploadimghere">
                                <form id="upload-widget" method="post" action="/admin/upload" class="dropzone" style="border-radius: 25px;">
                                </form>
                                <br/>
                                <form action="/admin/edit_file/<%= edit_file._id %>" method="post">
                                  <div class="form-group">
                                    <label for="">Tên</label>
                                    <input type="text" name="name" id="" class="form-control" placeholder="File" aria-describedby="helpId" value="<%= edit_file.ten %>">
                                    <label for="">Miêu tả tài liệu</label>
                                    <textarea name="description" id="" cols="30" rows="10" class="form-control" placeholder="" aria-describedby="helpId"><%= edit_file.description %></textarea>
                                    <small id="helpId" class="text-muted">Điền vào đây</small>
                                  </div>
                                  <button type="submit" class="btn btn-danger btn-blog">Lưu</button>
                                </form>
                              </div>
                              </p>
                            </div>
                          </div>
                        </div>
                  </div>
                </div>


               
              </div>
            </div>
            <% }) %> 

						<!--end::Entry-->
					</div>
					<!--end::Content-->
				<% include partials/footer %>
			</div>
			<!--end::Wrapper-->
		</div>
			<!--end::Page-->
	</div>
    <!--end::Main-->
  
    <!--begin::Scrolltop-->
    <div id="kt_scrolltop" class="scrolltop">
    <span class="svg-icon">
    <!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Up-2.svg-->
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <polygon points="0 0 24 0 24 24 0 24" />
            <rect fill="#000000" opacity="0.3" x="11" y="10" width="2" height="10" rx="1" />
            <path d="M6.70710678,12.7071068 C6.31658249,13.0976311 5.68341751,13.0976311 5.29289322,12.7071068 C4.90236893,12.3165825 4.90236893,11.6834175 5.29289322,11.2928932 L11.2928932,5.29289322 C11.6714722,4.91431428 12.2810586,4.90106866 12.6757246,5.26284586 L18.6757246,10.7628459 C19.0828436,11.1360383 19.1103465,11.7686056 18.7371541,12.1757246 C18.3639617,12.5828436 17.7313944,12.6103465 17.3242754,12.2371541 L12.0300757,7.38413782 L6.70710678,12.7071068 Z" fill="#000000" fill-rule="nonzero" />
        </g>
    </svg>
    <!--end::Svg Icon-->
    </span>
    </div>
    <!--end::Scrolltop-->
    
		<% include partials/script %>


    <script>
      Dropzone.options.uploadWidget = {
      paramName: 'file',
      maxFilesize: 100, // MB
      maxFiles: 2,
      dictDefaultMessage: 'Drag an image here to upload, or click to select one',
      headers: {
        'x-csrf-token': document.querySelectorAll('meta[name=csrf-token]')[0].getAttributeNode('content').value,
      },
      acceptedFiles: '',
      init: function() {
        this.on('success', function(file, resp){
          console.log(file);
          console.log(resp);
        });
        this.on('thumbnail', function(file) {
          if (file.accepted !== false) {
            if (file.width < 640 || file.height < 480) {//điều kiện img
              file.rejectDimensions();//nếu khác thông số ở trên sẽ bị từ chối
            }
            else {
              file.acceptDimensions();
            }
          }
        });
      },
      accept: function(file, done) {
        file.acceptDimensions = done;
        file.rejectDimensions = function() {
          done('The image must be at least 640 x 480px')
        };
      }
    };
    </script>
    <script src="/js/dropzone.min.js"></script>

    </body>
    <!--end::Body-->
    </html>